<div class="content-wrapper">

    <a href="/admin/add-products" class="btn btn-dark btn-lg btn-block ml-auto" style="width:20rem; ;">Add
        Poducts</a>
    <div class="card-body" style="background-color:rgb(255, 222, 227) ;">
        <h4 class="card-title">ALL PRRODUCTS</h4>
        <div class="table-responsive">
            <table class="table table-striped" style="font-weight: bold;">
                <thead>
                    <tr>
                        <th>
                            No.
                        </th>
                        <th>
                            Image
                        </th>
                        <th>
                            Product Name
                        </th>
                        <th>
                            Price
                        </th>
                        <th>
                            Stock
                        </th>
                        <th>
                            Categury
                        </th>
                        <th>
                            Edit
                        </th>
                        <th>
                            Delete
                        </th>
                    </tr>
                </thead>
                <tbody>

                    {{#each products}}
                    <tr>
                        <td class="py-1">
                            {{@index}}
                        </td>
                        <td class="py-1">
                            <img src="/product-images/{{this.images.[0]}}" />
                        </td>
                        <td>
                            {{this.ProductName}}
                        </td>
                        <td>
                            {{this.Price}}
                        </td>
                        <td>
                            {{this.stock}} - <span style="color:green ;"> Available</span>
                        </td>
                        <td>
                            {{this.Categury}}
                        </td>
                        <td>
                            <a href="/admin/edit-product/{{this._id}}" class="btn btn-inverse-info btn-fw"><i
                                    class="bi bi-pencil-square"></i></a>
                        </td>
                        <td>
                            <a class="btn btn-inverse-danger btn-fw"  onclick="askConferm('{{this._id}}')"><i
                                    class="bi bi-trash-fill"></i></a>

                        </td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>

        </div>

    </div>
</div>
<script>
    const askConferm = (productId) => {
        Swal.fire({
         title: 'Are you sure?',
         text: "You won't be able to revert this!",
         icon: 'warning',
         showCancelButton: true,
         confirmButtonColor: '#3085d6',
         cancelButtonColor: '#d33',
         confirmButtonText: 'Yes, Remove it!'
      }).then((result) => {
         if (result.isConfirmed) {
            location.href = `/admin/delete-product/${productId}`
            Swal.fire(
               'Deleted!',
               'Your file has been deleted.',
               'success'
            )
         }
      })
    }
</script>
